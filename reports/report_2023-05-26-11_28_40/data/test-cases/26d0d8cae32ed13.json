{"uid":"26d0d8cae32ed13","name":"test_4[名称重复创建门店活动码hq]","fullName":"core.testcase.test_excel#test_4","historyId":"1fd66723d334d10d5c075b1b399851c5","time":{"start":1685071282029,"stop":1685071299332,"duration":17303},"status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'name': '名称重复创建门店活动码hq(admin_driver)', 'steps': [(1, '点击导航栏渠道活码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", N..., (5, '点击创建门店活动码按钮', 'click', \"//span[contains(text(),'创建门店活码')]\", None), (6, '退出页面', 'iframe_exit', None, None), ...]}\nrequest = <FixtureRequest for <Function test_4[名称重复创建门店活动码hq]>>\n\n    @allure.feature(\"Web自动化测试平台\")\n    @allure.story(suite[\"name\"])\n    @pytest.mark.parametrize(\n        \"case\",\n        suite[\"case_list\"],\n        ids=[\n            handle_name(case[\"name\"])[0] for case in suite[\"case_list\"]\n        ],  # 参数化测试的名字\n    )  # 参数化的本质：动态生成用例\n    def test_abc(case, request):\n        logger.info(\"测试用例开始执行\")\n        # print(data)\n    \n        # 如果能够调用夹具，那么就有了浏览\n        # 根据excel内容，动态调用指定的夹具\n        # 1. 拿到用例名称     用例4(admin_driver)\n        # 2. 从用例名称中，解析夹具名称    admin_driver\n        case_name = handle_name(case[\"name\"])[0]\n        fixture_name = handle_name(case[\"name\"])[1]\n    \n        logger.info(f\"解析用例名称:{case_name=}, {fixture_name=}\")\n    \n        driver = request.getfixturevalue(fixture_name)\n        kw = KeyWord(driver)\n        kw.iframe_exit()\n        if \"hq\" in case_name:\n            kw.click(\"/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[4]/div/span\")\n        kw.refresh()\n        # 根据excel内容进行关键字的调用\n        for step in case[\"steps\"]:\n            name, key, args = handle_step(step)  # 这三个变量，可以再进行处理、修改\n            # 能不能加载csv文件\n            # 能行循环调用 func\n            logger.info(f\"执行关键字{name=}, {key=}, {args=}\")\n    \n            with allure.step(name):  # 在allure显式测试步骤\n                try:\n                    func = getattr(kw, key)  # 通过反射，难道关键字执行函数\n                    func(*args)  # 调用关键字函数\n                except Exception as error:\n                    allure.attach(driver.get_screenshot_as_png(), name) #截图\n>                   raise error\n\ncore\\until\\cases.py:111: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncore\\until\\cases.py:108: in test_abc\n    func(*args)  # 调用关键字函数\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.until.kdt.KeyWord object at 0x000001ADAE7075B0>, loc = \"//div[@class='ivu-notice-title']\", text = '活动码名称重复'\n\n    def assert_text_in(self, loc, text):\n        \"\"\"\n        断言：文本是否在定位元素中\n        :param loc:\n        :param text:\n        :return:\n        \"\"\"\n        self.sleep(0.5)\n        element = self.find_element(loc)\n        js_sentence_light = \"arguments[0].setAttribute('style', arguments[1]);\"\n        js_sentence_args = \"border: 5px solid red;\"\n        self.driver.execute_script(js_sentence_light, element, js_sentence_args)\n        logger.info(f\"assert ({text=}) in ({element.text=})\")\n>       assert text in element.text\nE       AssertionError\n\ncore\\until\\kdt.py:242: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"admin_driver","time":{"start":1685070895804,"stop":1685070910735,"duration":14931},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'name': '名称重复创建门店活动码hq(admin_driver)', 'steps': [(1, '点击导航栏渠道活码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", N..., (5, '点击创建门店活动码按钮', 'click', \"//span[contains(text(),'创建门店活码')]\", None), (6, '退出页面', 'iframe_exit', None, None), ...]}\nrequest = <FixtureRequest for <Function test_4[名称重复创建门店活动码hq]>>\n\n    @allure.feature(\"Web自动化测试平台\")\n    @allure.story(suite[\"name\"])\n    @pytest.mark.parametrize(\n        \"case\",\n        suite[\"case_list\"],\n        ids=[\n            handle_name(case[\"name\"])[0] for case in suite[\"case_list\"]\n        ],  # 参数化测试的名字\n    )  # 参数化的本质：动态生成用例\n    def test_abc(case, request):\n        logger.info(\"测试用例开始执行\")\n        # print(data)\n    \n        # 如果能够调用夹具，那么就有了浏览\n        # 根据excel内容，动态调用指定的夹具\n        # 1. 拿到用例名称     用例4(admin_driver)\n        # 2. 从用例名称中，解析夹具名称    admin_driver\n        case_name = handle_name(case[\"name\"])[0]\n        fixture_name = handle_name(case[\"name\"])[1]\n    \n        logger.info(f\"解析用例名称:{case_name=}, {fixture_name=}\")\n    \n        driver = request.getfixturevalue(fixture_name)\n        kw = KeyWord(driver)\n        kw.iframe_exit()\n        if \"hq\" in case_name:\n            kw.click(\"/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[4]/div/span\")\n        kw.refresh()\n        # 根据excel内容进行关键字的调用\n        for step in case[\"steps\"]:\n            name, key, args = handle_step(step)  # 这三个变量，可以再进行处理、修改\n            # 能不能加载csv文件\n            # 能行循环调用 func\n            logger.info(f\"执行关键字{name=}, {key=}, {args=}\")\n    \n            with allure.step(name):  # 在allure显式测试步骤\n                try:\n                    func = getattr(kw, key)  # 通过反射，难道关键字执行函数\n                    func(*args)  # 调用关键字函数\n                except Exception as error:\n                    allure.attach(driver.get_screenshot_as_png(), name) #截图\n>                   raise error\n\ncore\\until\\cases.py:111: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncore\\until\\cases.py:108: in test_abc\n    func(*args)  # 调用关键字函数\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.until.kdt.KeyWord object at 0x000001ADAE7075B0>, loc = \"//div[@class='ivu-notice-title']\", text = '活动码名称重复'\n\n    def assert_text_in(self, loc, text):\n        \"\"\"\n        断言：文本是否在定位元素中\n        :param loc:\n        :param text:\n        :return:\n        \"\"\"\n        self.sleep(0.5)\n        element = self.find_element(loc)\n        js_sentence_light = \"arguments[0].setAttribute('style', arguments[1]);\"\n        js_sentence_args = \"border: 5px solid red;\"\n        self.driver.execute_script(js_sentence_light, element, js_sentence_args)\n        logger.info(f\"assert ({text=}) in ({element.text=})\")\n>       assert text in element.text\nE       AssertionError\n\ncore\\until\\kdt.py:242: AssertionError","steps":[{"name":"点击导航栏渠道活码工具选项","time":{"start":1685071283833,"stop":1685071284908,"duration":1075},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"点击导航栏活动码选项","time":{"start":1685071284908,"stop":1685071285308,"duration":400},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"点击导航栏门店活动码选项","time":{"start":1685071285309,"stop":1685071285748,"duration":439},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"切换门店活动码主页","time":{"start":1685071285748,"stop":1685071286154,"duration":406},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"点击创建门店活动码按钮","time":{"start":1685071286155,"stop":1685071288192,"duration":2037},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"退出页面","time":{"start":1685071288193,"stop":1685071288203,"duration":10},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"切换创建门店活动码页面","time":{"start":1685071288203,"stop":1685071289134,"duration":931},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"输入活动名称","time":{"start":1685071289137,"stop":1685071290837,"duration":1700},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"点击关联主理按钮","time":{"start":1685071290837,"stop":1685071291294,"duration":457},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"控件输入主理人名称","time":{"start":1685071291295,"stop":1685071291773,"duration":478},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"控件输入框回车","time":{"start":1685071291774,"stop":1685071292167,"duration":393},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"勾选全部主理人","time":{"start":1685071292167,"stop":1685071292623,"duration":456},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"点击控件确认按钮","time":{"start":1685071292623,"stop":1685071293065,"duration":442},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"输入框输入渠道名称","time":{"start":1685071293065,"stop":1685071293692,"duration":627},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"选择渠道","time":{"start":1685071293693,"stop":1685071294167,"duration":474},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"输入用户标签","time":{"start":1685071294167,"stop":1685071294734,"duration":567},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"选择用户标签","time":{"start":1685071294735,"stop":1685071295525,"duration":790},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"收起用户标签下拉列表","time":{"start":1685071295526,"stop":1685071296189,"duration":663},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"输入文本欢迎语","time":{"start":1685071296189,"stop":1685071296742,"duration":553},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"点击保存并生成活动码按钮","time":{"start":1685071296743,"stop":1685071297249,"duration":506},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"退出页面","time":{"start":1685071297250,"stop":1685071297256,"duration":6},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0},{"name":"断言提示信息","time":{"start":1685071297257,"stop":1685071299331,"duration":2074},"status":"failed","statusMessage":"AssertionError\n","statusTrace":"  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\cases.py\", line 111, in test_abc\n    raise error\n  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\cases.py\", line 108, in test_abc\n    func(*args)  # 调用关键字函数\n  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\kdt.py\", line 242, in assert_text_in\n    assert text in element.text\n","steps":[],"attachments":[{"uid":"e5684a64e6d2260f","name":"断言提示信息","source":"e5684a64e6d2260f.attach","type":"image/png","size":234518}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":1,"hasContent":true,"stepsCount":0}],"attachments":[{"uid":"f06e6a753f553d33","name":"log","source":"f06e6a753f553d33.txt","type":"text/plain","size":4299}],"parameters":[],"shouldDisplayMessage":true,"attachmentsCount":2,"hasContent":true,"stepsCount":22},"afterStages":[{"name":"admin_driver::0","time":{"start":1685071716406,"stop":1685071719939,"duration":3533},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"attachmentsCount":0,"hasContent":false,"stepsCount":0}],"labels":[{"name":"feature","value":"Web自动化测试平台"},{"name":"story","value":"门店活动码"},{"name":"parentSuite","value":"core.testcase"},{"name":"suite","value":"test_excel"},{"name":"host","value":"LAPTOP-JPR7EIKK"},{"name":"thread","value":"70452-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"core.testcase.test_excel"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'name': '名称重复创建门店活动码hq(admin_driver)', 'steps': [(1, '点击导航栏渠道活码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", None), (2, '点击导航栏活动码选项', 'click', \"//span[contains(text(),'活动码')]\", None), (3, '点击导航栏门店活动码选项', 'click', \"//span[contains(text(),'门店活动码')]\", None), (4, '切换门店活动码主页', 'iframe_enter', '//iframe[@src=\"/marketing/storeActivityCode/page\"]', None), (5, '点击创建门店活动码按钮', 'click', \"//span[contains(text(),'创建门店活码')]\", None), (6, '退出页面', 'iframe_exit', None, None), (7, '切换创建门店活动码页面', 'iframe_enter', '//iframe[@src=\"/marketing/storeActivityCode/create\"]', None), (8, '输入活动名称', 'input', \"//label[contains(text(),'活动名称')]/../div/div[1]/input\", 'zdh测试正常创建门店活动码名称'), (9, '点击关联主理按钮', 'click', \"//span[contains(text(),'选择关联主理')]\", None), (10, '控件输入主理人名称', 'input', '//input[@placeholder = \"搜索门店/主理人\"]', 'U2店长'), (11, '控件输入框回车', 'keyboard_enter', '//input[@placeholder = \"搜索门店/主理人\"]', None), (12, '勾选全部主理人', 'click', \"//span[contains(text(),'全部主理')]/../label/span/input\", None), (13, '点击控件确认按钮', 'click', \"//span[contains(text(),'确定')]\", None), (14, '输入框输入渠道名称', 'input', \"//label[contains(text(),'选择渠道')]/../div/div/div[1]/div[1]/input\", 'AAA·1 / BBB / CCC'), (15, '选择渠道', 'click', \"//span[contains(text(),'AAA·1 / BBB / CCC')]\", 'force=True'), (16, '输入用户标签', 'input', '/html/body/div[1]/div/div/div/div/form/div[5]/div/div/div[1]/div/input', '测试人群包'), (17, '选择用户标签', 'click', \"//li[contains(text(),'测试人群包')]\", None), (18, '收起用户标签下拉列表', 'click', '//label[text()=\"用户标签\"]/../div/div/div/div/i', None), (19, '输入文本欢迎语', 'input', \"//textarea[@maxlength = '1000']\", 'zdh测试门店活动码欢迎语'), (20, '点击保存并生成活动码按钮', 'click', \"//div[@class='buttonContainer']/button[2]/span\", None), (21, '退出页面', 'iframe_exit', None, None), (22, '断言提示信息', 'assert_text_in', \"//div[@class='ivu-notice-title']\", '活动码名称重复')]}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"26d0d8cae32ed13.json","parameterValues":["{'name': '名称重复创建门店活动码hq(admin_driver)', 'steps': [(1, '点击导航栏渠道活码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", None), (2, '点击导航栏活动码选项', 'click', \"//span[contains(text(),'活动码')]\", None), (3, '点击导航栏门店活动码选项', 'click', \"//span[contains(text(),'门店活动码')]\", None), (4, '切换门店活动码主页', 'iframe_enter', '//iframe[@src=\"/marketing/storeActivityCode/page\"]', None), (5, '点击创建门店活动码按钮', 'click', \"//span[contains(text(),'创建门店活码')]\", None), (6, '退出页面', 'iframe_exit', None, None), (7, '切换创建门店活动码页面', 'iframe_enter', '//iframe[@src=\"/marketing/storeActivityCode/create\"]', None), (8, '输入活动名称', 'input', \"//label[contains(text(),'活动名称')]/../div/div[1]/input\", 'zdh测试正常创建门店活动码名称'), (9, '点击关联主理按钮', 'click', \"//span[contains(text(),'选择关联主理')]\", None), (10, '控件输入主理人名称', 'input', '//input[@placeholder = \"搜索门店/主理人\"]', 'U2店长'), (11, '控件输入框回车', 'keyboard_enter', '//input[@placeholder = \"搜索门店/主理人\"]', None), (12, '勾选全部主理人', 'click', \"//span[contains(text(),'全部主理')]/../label/span/input\", None), (13, '点击控件确认按钮', 'click', \"//span[contains(text(),'确定')]\", None), (14, '输入框输入渠道名称', 'input', \"//label[contains(text(),'选择渠道')]/../div/div/div[1]/div[1]/input\", 'AAA·1 / BBB / CCC'), (15, '选择渠道', 'click', \"//span[contains(text(),'AAA·1 / BBB / CCC')]\", 'force=True'), (16, '输入用户标签', 'input', '/html/body/div[1]/div/div/div/div/form/div[5]/div/div/div[1]/div/input', '测试人群包'), (17, '选择用户标签', 'click', \"//li[contains(text(),'测试人群包')]\", None), (18, '收起用户标签下拉列表', 'click', '//label[text()=\"用户标签\"]/../div/div/div/div/i', None), (19, '输入文本欢迎语', 'input', \"//textarea[@maxlength = '1000']\", 'zdh测试门店活动码欢迎语'), (20, '点击保存并生成活动码按钮', 'click', \"//div[@class='buttonContainer']/button[2]/span\", None), (21, '退出页面', 'iframe_exit', None, None), (22, '断言提示信息', 'assert_text_in', \"//div[@class='ivu-notice-title']\", '活动码名称重复')]}"]}