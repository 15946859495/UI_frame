{"uid":"5cb53b1a7a3d08d","name":"test_7[用户列表重置后查询hq]","fullName":"core.testcase.test_excel#test_7","historyId":"8c9c43451433fd5a6af136ad79e716c2","time":{"start":1685069530112,"stop":1685069541244,"duration":11132},"status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'name': '用户列表重置后查询hq(admin_driver)', 'steps': [(1, '点击导航栏客户联系选项', 'click', \"//span[contains(text(),'客户联系')]\", None), ...aceholder=\"请输入运营号昵称\"]', '流量池-蔡新强4'), (6, '输入好友手机号', 'input', '//input[@placeholder=\"请输入好友手机号\"]', '189167946894'), ...]}\nrequest = <FixtureRequest for <Function test_7[用户列表重置后查询hq]>>\n\n    @allure.feature(\"Web自动化测试平台\")\n    @allure.story(suite[\"name\"])\n    @pytest.mark.parametrize(\n        \"case\",\n        suite[\"case_list\"],\n        ids=[\n            handle_name(case[\"name\"])[0] for case in suite[\"case_list\"]\n        ],  # 参数化测试的名字\n    )  # 参数化的本质：动态生成用例\n    def test_abc(case, request):\n        logger.info(\"测试用例开始执行\")\n        # print(data)\n    \n        # 如果能够调用夹具，那么就有了浏览\n        # 根据excel内容，动态调用指定的夹具\n        # 1. 拿到用例名称     用例4(admin_driver)\n        # 2. 从用例名称中，解析夹具名称    admin_driver\n        case_name = handle_name(case[\"name\"])[0]\n        fixture_name = handle_name(case[\"name\"])[1]\n    \n        logger.info(f\"解析用例名称:{case_name=}, {fixture_name=}\")\n    \n        driver = request.getfixturevalue(fixture_name)\n        kw = KeyWord(driver)\n        kw.iframe_exit()\n        if \"hq\" in case_name:\n            kw.click(\"/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[4]/div/span\")\n        kw.refresh()\n        # 根据excel内容进行关键字的调用\n        for step in case[\"steps\"]:\n            name, key, args = handle_step(step)  # 这三个变量，可以再进行处理、修改\n            # 能不能加载csv文件\n            # 能行循环调用 func\n            logger.info(f\"执行关键字{name=}, {key=}, {args=}\")\n    \n            with allure.step(name):  # 在allure显式测试步骤\n                try:\n                    func = getattr(kw, key)  # 通过反射，难道关键字执行函数\n                    func(*args)  # 调用关键字函数\n                except Exception as error:\n                    allure.attach(driver.get_screenshot_as_png(), name) #截图\n>                   raise error\n\ncore\\until\\cases.py:111: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncore\\until\\cases.py:108: in test_abc\n    func(*args)  # 调用关键字函数\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.until.kdt.KeyWord object at 0x000001A14FB25090>, loc = '//tbody[1]/tr[1]'\ntext = ['微信昵称：我想我忘了', 'unionId：oJGOG5hcN34wKXfSrI49T_5Rll5M', '微信手机号：18916794689', '测试人群包', '企业微信昵称：流量池-蔡新强', '手机号：15946859495', ...]\n\n    def assert_text_in_list(self, loc, text):\n        \"\"\"\n        断言：文本在列表中\n        :param loc:\n        :param text:\n        :return:\n        \"\"\"\n        self.sleep(0.5)\n        element = self.find_element(loc)\n        js_sentence_light = \"arguments[0].setAttribute('style', arguments[1]);\"\n        js_sentence_args = \"border: 5px solid red;\"\n        self.driver.execute_script(js_sentence_light, element, js_sentence_args)\n        msg = element.text.split('\\n')\n        # text = text.replace(' ', '').split(',')   #  去掉空格后再分组\n        text = text.split(',')\n        logger.info(f\"assert ({text=}) in ({msg=})\")\n        for i in text:\n            logger.info(f\"assert ({i=}) in ({msg=})\")\n>           assert i in str(msg)\nE           AssertionError\n\ncore\\until\\kdt.py:294: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"admin_driver","time":{"start":1685068798685,"stop":1685068814928,"duration":16243},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"testStage":{"status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'name': '用户列表重置后查询hq(admin_driver)', 'steps': [(1, '点击导航栏客户联系选项', 'click', \"//span[contains(text(),'客户联系')]\", None), ...aceholder=\"请输入运营号昵称\"]', '流量池-蔡新强4'), (6, '输入好友手机号', 'input', '//input[@placeholder=\"请输入好友手机号\"]', '189167946894'), ...]}\nrequest = <FixtureRequest for <Function test_7[用户列表重置后查询hq]>>\n\n    @allure.feature(\"Web自动化测试平台\")\n    @allure.story(suite[\"name\"])\n    @pytest.mark.parametrize(\n        \"case\",\n        suite[\"case_list\"],\n        ids=[\n            handle_name(case[\"name\"])[0] for case in suite[\"case_list\"]\n        ],  # 参数化测试的名字\n    )  # 参数化的本质：动态生成用例\n    def test_abc(case, request):\n        logger.info(\"测试用例开始执行\")\n        # print(data)\n    \n        # 如果能够调用夹具，那么就有了浏览\n        # 根据excel内容，动态调用指定的夹具\n        # 1. 拿到用例名称     用例4(admin_driver)\n        # 2. 从用例名称中，解析夹具名称    admin_driver\n        case_name = handle_name(case[\"name\"])[0]\n        fixture_name = handle_name(case[\"name\"])[1]\n    \n        logger.info(f\"解析用例名称:{case_name=}, {fixture_name=}\")\n    \n        driver = request.getfixturevalue(fixture_name)\n        kw = KeyWord(driver)\n        kw.iframe_exit()\n        if \"hq\" in case_name:\n            kw.click(\"/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[4]/div/span\")\n        kw.refresh()\n        # 根据excel内容进行关键字的调用\n        for step in case[\"steps\"]:\n            name, key, args = handle_step(step)  # 这三个变量，可以再进行处理、修改\n            # 能不能加载csv文件\n            # 能行循环调用 func\n            logger.info(f\"执行关键字{name=}, {key=}, {args=}\")\n    \n            with allure.step(name):  # 在allure显式测试步骤\n                try:\n                    func = getattr(kw, key)  # 通过反射，难道关键字执行函数\n                    func(*args)  # 调用关键字函数\n                except Exception as error:\n                    allure.attach(driver.get_screenshot_as_png(), name) #截图\n>                   raise error\n\ncore\\until\\cases.py:111: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\ncore\\until\\cases.py:108: in test_abc\n    func(*args)  # 调用关键字函数\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.until.kdt.KeyWord object at 0x000001A14FB25090>, loc = '//tbody[1]/tr[1]'\ntext = ['微信昵称：我想我忘了', 'unionId：oJGOG5hcN34wKXfSrI49T_5Rll5M', '微信手机号：18916794689', '测试人群包', '企业微信昵称：流量池-蔡新强', '手机号：15946859495', ...]\n\n    def assert_text_in_list(self, loc, text):\n        \"\"\"\n        断言：文本在列表中\n        :param loc:\n        :param text:\n        :return:\n        \"\"\"\n        self.sleep(0.5)\n        element = self.find_element(loc)\n        js_sentence_light = \"arguments[0].setAttribute('style', arguments[1]);\"\n        js_sentence_args = \"border: 5px solid red;\"\n        self.driver.execute_script(js_sentence_light, element, js_sentence_args)\n        msg = element.text.split('\\n')\n        # text = text.replace(' ', '').split(',')   #  去掉空格后再分组\n        text = text.split(',')\n        logger.info(f\"assert ({text=}) in ({msg=})\")\n        for i in text:\n            logger.info(f\"assert ({i=}) in ({msg=})\")\n>           assert i in str(msg)\nE           AssertionError\n\ncore\\until\\kdt.py:294: AssertionError","steps":[{"name":"点击导航栏客户联系选项","time":{"start":1685069532027,"stop":1685069533091,"duration":1064},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"点击导航栏用户管理选项","time":{"start":1685069533091,"stop":1685069533544,"duration":453},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"点击导航栏用户列表选项选项","time":{"start":1685069533546,"stop":1685069534008,"duration":462},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"切换用户列表主页","time":{"start":1685069534009,"stop":1685069534867,"duration":858},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入运营号昵称","time":{"start":1685069534868,"stop":1685069535311,"duration":443},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入好友手机号","time":{"start":1685069535312,"stop":1685069535802,"duration":490},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入unionID","time":{"start":1685069535802,"stop":1685069536358,"duration":556},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入标签名","time":{"start":1685069536358,"stop":1685069536776,"duration":418},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入查询时间段","time":{"start":1685069536777,"stop":1685069537218,"duration":441},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入好友微信昵称","time":{"start":1685069537218,"stop":1685069537651,"duration":433},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"点击查询按钮","time":{"start":1685069537651,"stop":1685069538086,"duration":435},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"点击重置按钮","time":{"start":1685069538087,"stop":1685069538597,"duration":510},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入运营号昵称","time":{"start":1685069538598,"stop":1685069539164,"duration":566},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"输入好友微信昵称","time":{"start":1685069539165,"stop":1685069539574,"duration":409},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"搜索框回车","time":{"start":1685069539575,"stop":1685069539939,"duration":364},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false},{"name":"断言人群包信息在列表内","time":{"start":1685069539939,"stop":1685069541242,"duration":1303},"status":"failed","statusMessage":"AssertionError\n","statusTrace":"  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\cases.py\", line 111, in test_abc\n    raise error\n  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\cases.py\", line 108, in test_abc\n    func(*args)  # 调用关键字函数\n  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\kdt.py\", line 294, in assert_text_in_list\n    assert i in str(msg)\n","steps":[],"attachments":[{"uid":"276076d963a1a92d","name":"断言人群包信息在列表内","source":"276076d963a1a92d.attach","type":"image/png","size":213789}],"parameters":[],"stepsCount":0,"hasContent":true,"attachmentsCount":1,"shouldDisplayMessage":true}],"attachments":[{"uid":"e946e201f5902a97","name":"log","source":"e946e201f5902a97.txt","type":"text/plain","size":5136}],"parameters":[],"stepsCount":16,"hasContent":true,"attachmentsCount":2,"shouldDisplayMessage":true},"afterStages":[{"name":"admin_driver::0","time":{"start":1685069610520,"stop":1685069614063,"duration":3543},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"attachmentsCount":0,"shouldDisplayMessage":false}],"labels":[{"name":"feature","value":"Web自动化测试平台"},{"name":"story","value":"用户列表"},{"name":"parentSuite","value":"core.testcase"},{"name":"suite","value":"test_excel"},{"name":"host","value":"LAPTOP-JPR7EIKK"},{"name":"thread","value":"49644-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"core.testcase.test_excel"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'name': '用户列表重置后查询hq(admin_driver)', 'steps': [(1, '点击导航栏客户联系选项', 'click', \"//span[contains(text(),'客户联系')]\", None), (2, '点击导航栏用户管理选项', 'click', \"//span[contains(text(),'用户管理')]\", None), (3, '点击导航栏用户列表选项选项', 'click', \"//span[contains(text(),'用户列表')]\", None), (4, '切换用户列表主页', 'iframe_enter', '//iframe[@src=\"/im/relation/page\"]', None), (5, '输入运营号昵称', 'input', '//input[@placeholder=\"请输入运营号昵称\"]', '流量池-蔡新强4'), (6, '输入好友手机号', 'input', '//input[@placeholder=\"请输入好友手机号\"]', '189167946894'), (7, '输入unionID', 'input', '//input[@placeholder=\"请输入unionID\"]', 'oJGOG5hcN34wKXfSrI49T_5Rll5D'), (8, '输入标签名', 'input', '//input[@placeholder=\"请输入标签名\"]', '测试人群'), (9, '输入查询时间段', 'input', '//input[@placeholder=\"请选择时间\"]', '2023-05-06 - 2023-05-10'), (10, '输入好友微信昵称', 'input', '//input[@placeholder=\"请输入微信昵称\"]', '我想我忘了8'), (11, '点击查询按钮', 'click', \"//span[contains(text(),'查询')]\", None), (12, '点击重置按钮', 'click', \"//span[contains(text(),'重置')]\", None), (13, '输入运营号昵称', 'input', '//input[@placeholder=\"请输入运营号昵称\"]', '流量池-蔡新强'), (14, '输入好友微信昵称', 'input', '//input[@placeholder=\"请输入微信昵称\"]', '我想我忘了'), (15, '搜索框回车', 'keyboard_enter', '//input[@placeholder=\"请输入微信昵称\"]', None), (16, '断言人群包信息在列表内', 'assert_text_in_list', '//tbody[1]/tr[1]', '微信昵称：我想我忘了,unionId：oJGOG5hcN34wKXfSrI49T_5Rll5M,微信手机号：18916794689,测试人群包,企业微信昵称：流量池-蔡新强,手机号：15946859495,2023-05-06 17:48:02')]}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"5cb53b1a7a3d08d.json","parameterValues":["{'name': '用户列表重置后查询hq(admin_driver)', 'steps': [(1, '点击导航栏客户联系选项', 'click', \"//span[contains(text(),'客户联系')]\", None), (2, '点击导航栏用户管理选项', 'click', \"//span[contains(text(),'用户管理')]\", None), (3, '点击导航栏用户列表选项选项', 'click', \"//span[contains(text(),'用户列表')]\", None), (4, '切换用户列表主页', 'iframe_enter', '//iframe[@src=\"/im/relation/page\"]', None), (5, '输入运营号昵称', 'input', '//input[@placeholder=\"请输入运营号昵称\"]', '流量池-蔡新强4'), (6, '输入好友手机号', 'input', '//input[@placeholder=\"请输入好友手机号\"]', '189167946894'), (7, '输入unionID', 'input', '//input[@placeholder=\"请输入unionID\"]', 'oJGOG5hcN34wKXfSrI49T_5Rll5D'), (8, '输入标签名', 'input', '//input[@placeholder=\"请输入标签名\"]', '测试人群'), (9, '输入查询时间段', 'input', '//input[@placeholder=\"请选择时间\"]', '2023-05-06 - 2023-05-10'), (10, '输入好友微信昵称', 'input', '//input[@placeholder=\"请输入微信昵称\"]', '我想我忘了8'), (11, '点击查询按钮', 'click', \"//span[contains(text(),'查询')]\", None), (12, '点击重置按钮', 'click', \"//span[contains(text(),'重置')]\", None), (13, '输入运营号昵称', 'input', '//input[@placeholder=\"请输入运营号昵称\"]', '流量池-蔡新强'), (14, '输入好友微信昵称', 'input', '//input[@placeholder=\"请输入微信昵称\"]', '我想我忘了'), (15, '搜索框回车', 'keyboard_enter', '//input[@placeholder=\"请输入微信昵称\"]', None), (16, '断言人群包信息在列表内', 'assert_text_in_list', '//tbody[1]/tr[1]', '微信昵称：我想我忘了,unionId：oJGOG5hcN34wKXfSrI49T_5Rll5M,微信手机号：18916794689,测试人群包,企业微信昵称：流量池-蔡新强,手机号：15946859495,2023-05-06 17:48:02')]}"]}