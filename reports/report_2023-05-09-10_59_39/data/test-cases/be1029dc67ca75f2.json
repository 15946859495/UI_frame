{"uid":"be1029dc67ca75f2","name":"test_5[精准查询活动码]","fullName":"core.testcase.test_excel#test_5","historyId":"25f4e4648eb8fcd7ff8e6c4fd012a4b4","time":{"start":1683601070263,"stop":1683601086928,"duration":16665},"status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'name': '精准查询活动码(admin_driver)', 'steps': [(1, '点击导航栏渠道活动码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", None),...), (6, '点击渠道输入框', 'click', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[2]/div/div/div/div/div', None), ...]}\nrequest = <FixtureRequest for <Function test_5[精准查询活动码]>>\n\n    @allure.feature(\"Web自动化测试平台\")\n    @allure.story(suite[\"name\"])\n    @pytest.mark.parametrize(\n        \"case\",\n        suite[\"case_list\"],\n        ids=[\n            handle_name(case[\"name\"])[0] for case in suite[\"case_list\"]\n        ],  # 参数化测试的名字\n    )  # 参数化的本质：动态生成用例\n    def test_abc(case, request):\n        logger.info(\"测试用例开始执行\")\n        # print(data)\n    \n        # 如果能够调用夹具，那么就有了浏览\n        # 根据excel内容，动态调用指定的夹具\n        # 1. 拿到用例名称     用例4(admin_driver)\n        # 2. 从用例名称中，解析夹具名称    admin_driver\n        case_name = handle_name(case[\"name\"])[0]\n        fixture_name = handle_name(case[\"name\"])[1]\n    \n        logger.info(f\"解析用例名称:{case_name=}, {fixture_name=}\")\n    \n        driver = request.getfixturevalue(fixture_name)\n        kw = KeyWord(driver)\n        kw.iframe_exit()\n        if \"码\" in case_name:\n            kw.click(\"/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[4]/div/span\")\n        kw.refresh()\n        # 根据excel内容进行关键字的调用\n        for step in case[\"steps\"]:\n            name, key, args = handle_step(step)  # 这三个变量，可以再进行处理、修改\n            # 能不能加载csv文件\n            # 能行循环调用 func\n            logger.info(f\"执行关键字{name=}, {key=}, {args=}\")\n    \n            with allure.step(name):  # 在allure显式测试步骤\n                func = getattr(kw, key)  # 通过反射，难道关键字执行函数\n>               func(*args)  # 调用关键字函数\n\ncore\\until\\cases.py:108: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.until.kdt.KeyWord object at 0x000001D0510CA770>, loc = '//tbody[1]', text = ['zdh测试正常创建活动码名称', '上海', '浦东', '来福士门店', 'U2店长', '手机号：17521160379', ...]\n\n    def assert_text_in_list(self, loc, text):\n        \"\"\"\n        断言：文本在列表中\n        :param loc:\n        :param text:\n        :return:\n        \"\"\"\n        self.sleep(0.5)\n        element = self.find_element(loc)\n        js_sentence_light = \"arguments[0].setAttribute('style', arguments[1]);\"\n        js_sentence_args = \"border: 5px solid red;\"\n        self.driver.execute_script(js_sentence_light, element, js_sentence_args)\n        msg = element.text.split('\\n')\n        text = text.replace(' ', '').split(',')\n        logger.info(f\"assert ({text=}) in ({msg=})\")\n        allure.attach(self.driver.get_screenshot_as_png(), \"断言截图\")\n        for i in text:\n            logger.info(f\"assert ({i=}) in ({msg=})\")\n>           assert i in msg\nE           AssertionError\n\ncore\\until\\kdt.py:298: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"admin_driver","time":{"start":1683600462433,"stop":1683600479649,"duration":17216},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError","statusTrace":"case = {'name': '精准查询活动码(admin_driver)', 'steps': [(1, '点击导航栏渠道活动码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", None),...), (6, '点击渠道输入框', 'click', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[2]/div/div/div/div/div', None), ...]}\nrequest = <FixtureRequest for <Function test_5[精准查询活动码]>>\n\n    @allure.feature(\"Web自动化测试平台\")\n    @allure.story(suite[\"name\"])\n    @pytest.mark.parametrize(\n        \"case\",\n        suite[\"case_list\"],\n        ids=[\n            handle_name(case[\"name\"])[0] for case in suite[\"case_list\"]\n        ],  # 参数化测试的名字\n    )  # 参数化的本质：动态生成用例\n    def test_abc(case, request):\n        logger.info(\"测试用例开始执行\")\n        # print(data)\n    \n        # 如果能够调用夹具，那么就有了浏览\n        # 根据excel内容，动态调用指定的夹具\n        # 1. 拿到用例名称     用例4(admin_driver)\n        # 2. 从用例名称中，解析夹具名称    admin_driver\n        case_name = handle_name(case[\"name\"])[0]\n        fixture_name = handle_name(case[\"name\"])[1]\n    \n        logger.info(f\"解析用例名称:{case_name=}, {fixture_name=}\")\n    \n        driver = request.getfixturevalue(fixture_name)\n        kw = KeyWord(driver)\n        kw.iframe_exit()\n        if \"码\" in case_name:\n            kw.click(\"/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[4]/div/span\")\n        kw.refresh()\n        # 根据excel内容进行关键字的调用\n        for step in case[\"steps\"]:\n            name, key, args = handle_step(step)  # 这三个变量，可以再进行处理、修改\n            # 能不能加载csv文件\n            # 能行循环调用 func\n            logger.info(f\"执行关键字{name=}, {key=}, {args=}\")\n    \n            with allure.step(name):  # 在allure显式测试步骤\n                func = getattr(kw, key)  # 通过反射，难道关键字执行函数\n>               func(*args)  # 调用关键字函数\n\ncore\\until\\cases.py:108: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <core.until.kdt.KeyWord object at 0x000001D0510CA770>, loc = '//tbody[1]', text = ['zdh测试正常创建活动码名称', '上海', '浦东', '来福士门店', 'U2店长', '手机号：17521160379', ...]\n\n    def assert_text_in_list(self, loc, text):\n        \"\"\"\n        断言：文本在列表中\n        :param loc:\n        :param text:\n        :return:\n        \"\"\"\n        self.sleep(0.5)\n        element = self.find_element(loc)\n        js_sentence_light = \"arguments[0].setAttribute('style', arguments[1]);\"\n        js_sentence_args = \"border: 5px solid red;\"\n        self.driver.execute_script(js_sentence_light, element, js_sentence_args)\n        msg = element.text.split('\\n')\n        text = text.replace(' ', '').split(',')\n        logger.info(f\"assert ({text=}) in ({msg=})\")\n        allure.attach(self.driver.get_screenshot_as_png(), \"断言截图\")\n        for i in text:\n            logger.info(f\"assert ({i=}) in ({msg=})\")\n>           assert i in msg\nE           AssertionError\n\ncore\\until\\kdt.py:298: AssertionError","steps":[{"name":"点击导航栏渠道活动码工具选项","time":{"start":1683601072169,"stop":1683601072813,"duration":644},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击导航栏活动码选项","time":{"start":1683601072814,"stop":1683601073221,"duration":407},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击导航栏活动码选项","time":{"start":1683601073221,"stop":1683601073646,"duration":425},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"切换活动码主页","time":{"start":1683601073647,"stop":1683601074021,"duration":374},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"输入完整活动码名称","time":{"start":1683601074022,"stop":1683601075452,"duration":1430},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击渠道输入框","time":{"start":1683601075453,"stop":1683601075935,"duration":482},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"选择大渠道","time":{"start":1683601075936,"stop":1683601076399,"duration":463},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"选择中渠道","time":{"start":1683601076399,"stop":1683601076833,"duration":434},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"选择小渠道","time":{"start":1683601076834,"stop":1683601077181,"duration":347},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击确定按钮","time":{"start":1683601077182,"stop":1683601077619,"duration":437},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击区域输入框","time":{"start":1683601077619,"stop":1683601078207,"duration":588},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"选择大区","time":{"start":1683601078208,"stop":1683601078824,"duration":616},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"选择小区","time":{"start":1683601078824,"stop":1683601079280,"duration":456},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击确定按钮","time":{"start":1683601079282,"stop":1683601079770,"duration":488},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"输入框输入名称","time":{"start":1683601079771,"stop":1683601080352,"duration":581},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"下拉列表选择","time":{"start":1683601080352,"stop":1683601080822,"duration":470},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"主理人输入框输入主理人名","time":{"start":1683601080822,"stop":1683601081366,"duration":544},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"等待1s","time":{"start":1683601081366,"stop":1683601082376,"duration":1010},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"下拉列表选择主理人","time":{"start":1683601082376,"stop":1683601082805,"duration":429},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"下拉列表选择主理人","time":{"start":1683601082805,"stop":1683601083456,"duration":651},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击查询按钮","time":{"start":1683601083458,"stop":1683601083991,"duration":533},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"点击查询按钮","time":{"start":1683601083992,"stop":1683601085211,"duration":1219},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0},{"name":"断言活动码信息在列表中","time":{"start":1683601085212,"stop":1683601086923,"duration":1711},"status":"failed","statusMessage":"AssertionError\n","statusTrace":"  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\cases.py\", line 108, in test_abc\n    func(*args)  # 调用关键字函数\n  File \"E:\\zdh\\pythonProject\\UI_frame\\core\\until\\kdt.py\", line 298, in assert_text_in_list\n    assert i in msg\n","steps":[],"attachments":[{"uid":"aadfc042ceea07c","name":"断言截图","source":"aadfc042ceea07c.attach","type":"image/png","size":194621}],"parameters":[],"attachmentsCount":1,"shouldDisplayMessage":true,"hasContent":true,"stepsCount":0}],"attachments":[{"uid":"d0e31fd72a2f7bda","name":"log","source":"d0e31fd72a2f7bda.txt","type":"text/plain","size":5244}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":true,"hasContent":true,"stepsCount":23},"afterStages":[{"name":"admin_driver::0","time":{"start":1683601174609,"stop":1683601178939,"duration":4330},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"hasContent":false,"stepsCount":0}],"labels":[{"name":"story","value":"活动码"},{"name":"feature","value":"Web自动化测试平台"},{"name":"parentSuite","value":"core.testcase"},{"name":"suite","value":"test_excel"},{"name":"host","value":"LAPTOP-JPR7EIKK"},{"name":"thread","value":"43676-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"core.testcase.test_excel"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"case","value":"{'name': '精准查询活动码(admin_driver)', 'steps': [(1, '点击导航栏渠道活动码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", None), (2, '点击导航栏活动码选项', 'click', \"//span[contains(text(),'活动码')]\", None), (3, '点击导航栏活动码选项', 'click', '/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[3]/ul/li[3]/ul/li[3]/div/span', None), (4, '切换活动码主页', 'iframe_enter', '//iframe[@src=\"/marketing/activityCode/page\"]', None), (5, '输入完整活动码名称', 'input', '//input[@placeholder=\"请输入\"]', 'zdh测试正常创建活动码名称'), (6, '点击渠道输入框', 'click', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[2]/div/div/div/div/div', None), (7, '选择大渠道', 'click', '//div[contains(text(),\"上海\")]', None), (8, '选择中渠道', 'click', '//div[contains(text(),\"浦东\")]', None), (9, '选择小渠道', 'click', '//div[contains(text(),\"来福士\")]', '  '), (10, '点击确定按钮', 'click', '//span[contains(text(),\"确定\")]', None), (11, '点击区域输入框', 'click', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[3]/div/div/div/div/div', None), (12, '选择大区', 'click', '//div[contains(text(),\"五件套大区1\")]', None), (13, '选择小区', 'click', '//div[contains(text(),\"五件套小区1\")]', None), (14, '点击确定按钮', 'click', '/html/body/div[3]/div[2]/div/div/div[3]/div/button[3]/span', None), (15, '输入框输入名称', 'input', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[4]/div/div/div/div[1]/div/input', '五件套店U2'), (16, '下拉列表选择', 'click', '//li[contains(text(),\"五件套店U2\")]', None), (17, '主理人输入框输入主理人名', 'input', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[5]/div/div/div/div[1]/div/input', 'U2店长'), (18, '等待1s', 'sleep', 1, None), (19, '下拉列表选择主理人', 'click', '//li[contains(text(),\"U2店长\")]', None), (20, '下拉列表选择主理人', 'click', '//li[contains(text(),\"U2店长\")]', None), (21, '点击查询按钮', 'click', '//span[contains(text(),\"查询\")]', None), (22, '点击查询按钮', 'click', '//span[contains(text(),\"查询\")]', None), (23, '断言活动码信息在列表中', 'assert_text_in_list', '//tbody[1]', 'zdh测试正常创建活动码名称, 上海, 浦东, 来福士门店, U2店长, 手机号：17521160379, 25-30万,zdh测试活动码欢迎语1,神秘人')]}"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"be1029dc67ca75f2.json","parameterValues":["{'name': '精准查询活动码(admin_driver)', 'steps': [(1, '点击导航栏渠道活动码工具选项', 'click', \"//span[contains(text(),'渠道活码工具')]\", None), (2, '点击导航栏活动码选项', 'click', \"//span[contains(text(),'活动码')]\", None), (3, '点击导航栏活动码选项', 'click', '/html/body/div[1]/div[1]/div[1]/div[2]/div/ul/li[3]/ul/li[3]/ul/li[3]/div/span', None), (4, '切换活动码主页', 'iframe_enter', '//iframe[@src=\"/marketing/activityCode/page\"]', None), (5, '输入完整活动码名称', 'input', '//input[@placeholder=\"请输入\"]', 'zdh测试正常创建活动码名称'), (6, '点击渠道输入框', 'click', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[2]/div/div/div/div/div', None), (7, '选择大渠道', 'click', '//div[contains(text(),\"上海\")]', None), (8, '选择中渠道', 'click', '//div[contains(text(),\"浦东\")]', None), (9, '选择小渠道', 'click', '//div[contains(text(),\"来福士\")]', '  '), (10, '点击确定按钮', 'click', '//span[contains(text(),\"确定\")]', None), (11, '点击区域输入框', 'click', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[3]/div/div/div/div/div', None), (12, '选择大区', 'click', '//div[contains(text(),\"五件套大区1\")]', None), (13, '选择小区', 'click', '//div[contains(text(),\"五件套小区1\")]', None), (14, '点击确定按钮', 'click', '/html/body/div[3]/div[2]/div/div/div[3]/div/button[3]/span', None), (15, '输入框输入名称', 'input', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[4]/div/div/div/div[1]/div/input', '五件套店U2'), (16, '下拉列表选择', 'click', '//li[contains(text(),\"五件套店U2\")]', None), (17, '主理人输入框输入主理人名', 'input', '/html/body/div[1]/div/div/div/div/div[1]/form/div/div[5]/div/div/div/div[1]/div/input', 'U2店长'), (18, '等待1s', 'sleep', 1, None), (19, '下拉列表选择主理人', 'click', '//li[contains(text(),\"U2店长\")]', None), (20, '下拉列表选择主理人', 'click', '//li[contains(text(),\"U2店长\")]', None), (21, '点击查询按钮', 'click', '//span[contains(text(),\"查询\")]', None), (22, '点击查询按钮', 'click', '//span[contains(text(),\"查询\")]', None), (23, '断言活动码信息在列表中', 'assert_text_in_list', '//tbody[1]', 'zdh测试正常创建活动码名称, 上海, 浦东, 来福士门店, U2店长, 手机号：17521160379, 25-30万,zdh测试活动码欢迎语1,神秘人')]}"]}